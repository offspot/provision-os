---
name: bookworm-arm64
mmdebstrap:
  architectures:
    - arm64
  mode: auto
  variant: apt
  suite: bookworm
  setup-hooks:
    - gpg --keyserver hkp://keyserver.ubuntu.com:80 --recv-keys 0E98404D386FA1D9 6ED0E7B82643E131 F8D2585B8783D481 54404762BBB6E853 BDE6D2B9216EC7A8 78DBA3BC47EF2265
    - mkdir -p $1/etc/apt/trusted.gpg.d
    - gpg -a --export 0E98404D386FA1D9 > $1/etc/apt/trusted.gpg.d/debian-0E98404D386FA1D9.asc
    - gpg -a --export 6ED0E7B82643E131 > $1/etc/apt/trusted.gpg.d/debian-6ED0E7B82643E131.asc
    - gpg -a --export F8D2585B8783D481 > $1/etc/apt/trusted.gpg.d/debian-F8D2585B8783D481.asc
    - gpg -a --export 54404762BBB6E853 > $1/etc/apt/trusted.gpg.d/debian-54404762BBB6E853.asc
    - gpg -a --export BDE6D2B9216EC7A8 > $1/etc/apt/trusted.gpg.d/debian-BDE6D2B9216EC7A8.asc
    - gpg -a --export 78DBA3BC47EF2265 > $1/etc/apt/trusted.gpg.d/debian-78DBA3BC47EF2265.asc
  mirrors:
    - deb https://deb.debian.org/debian bookworm main contrib non-free non-free-firmware
    - deb https://deb.debian.org/debian-security bookworm-security main contrib non-free non-free-firmware
    - deb https://deb.debian.org/debian bookworm-updates main contrib non-free non-free-firmware
  essential-hooks:
    - echo tzdata tzdata/Areas select "$IGconf_device_timezone_area"
        | chroot $1 debconf-set-selections
    - echo tzdata tzdata/Zones/$IGconf_device_timezone_area select "$IGconf_device_timezone_city"
        | chroot $1 debconf-set-selections
    - echo locales locales/locales_to_be_generated multiselect "$IGconf_device_locale1"
        | chroot $1 debconf-set-selections
    - echo locales locales/default_environment_locale select "$IGconf_device_locale1"
        | chroot $1 debconf-set-selections
    - echo keyboard-configuration keyboard-configuration/variant select "$IGconf_device_keyboard_layout"
        | chroot $1 debconf-set-selections
    - echo keyboard-configuration keyboard-configuration/xkb-keymap select "$IGconf_device_keyboard_keymap"
        | chroot $1 debconf-set-selections
  aptopts:
    - APT::Install-Suggests "false"
    - APT::Install-Recommends "false"
  dpkgopts:
    - path-exclude=/usr/share/man/*
    - path-include=/usr/share/man/man[1-9]/*
    - path-exclude=/usr/share/locale/*
    - path-include=/usr/share/locale/locale.alias
    - path-exclude=/usr/share/doc/*
    - path-include=/usr/share/doc/*/copyright
    - path-include=/usr/share/doc/*/changelog.Debian.*
    - path-exclude=/usr/share/{doc,info,man,omf,help,gnome/help}/*
    - path-exclude=/usr/share/lintian/*
